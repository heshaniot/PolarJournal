% =============================================================================
% Title       : 802.11n D2.0 LDPC Code Definition
% -----------------------------------------------------------------------------
% Revisions   :
%   Date       Version  Author  Description
%   04-oct-07  1.0      studer  file created
% =============================================================================

function LDPC = LDPC_11nD2_504b_R12

  LDPC.name = 'LDPC_11nD2_504b_R12.mat';
   
 %this was 36 in the original matrix. but it is changed into 21 to get a
 %block size of 504
  LDPC.Z = 21; % subblock size
  %----------
  H_r12_n504_z21 =[  -1 -1 -1 26 33 -1 -1 -1 -1 20 12 34  1  0 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 
                    -1 -1 34 -1 -1 -1  7 -1 21 29  9  0 -1  0  0 -1 -1 -1 -1 -1 -1 -1 -1 -1 
                    -1 -1 -1 11 -1 -1 -1  0 25 21 34 -1 -1 -1  0  0 -1 -1 -1 -1 -1 -1 -1 -1 
                    -1 16 -1 -1  4 -1 -1 -1 -1 17  7 16 -1 -1 -1  0  0 -1 -1 -1 -1 -1 -1 -1 
                    -1 -1 11 -1 -1 22 -1 -1 -1  9 19  6 -1 -1 -1 -1  0  0 -1 -1 -1 -1 -1 -1 
                    -1 23 -1 -1 -1 -1 25 -1 -1 15 17 27 -1 -1 -1 -1 -1  0  0 -1 -1 -1 -1 -1 
                    -1 -1 10 -1 -1 -1 -1 -1 12 25 -1  2  0 -1 -1 -1 -1 -1  0  0 -1 -1 -1 -1 
                    21 -1 -1 17 -1 29 -1 -1 -1 22  7  7 -1 -1 -1 -1 -1 -1 -1  0  0 -1 -1 -1 
                    -1  4 -1 -1 -1 -1 -1  7 -1 34 13 29 -1 -1 -1 -1 -1 -1 -1 -1  0  0 -1 -1 
                    25 -1 -1 -1 -1 -1 23 -1 -1 22  8 14 -1 -1 -1 -1 -1 -1 -1 -1 -1  0  0 -1 
                    -1 -1 -1 -1 35 18 -1 -1  8 -1 24 17 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1  0  0 
                    31 -1 -1 -1 -1 -1 -1 14 -1  2 16 21  1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1  0 
                    ];

   [row col] = size(H_r12_n504_z21);

    prot = cell(row,col) ;
    for i=1:row
        for j=1:col
                if H_r12_n504_z21(i,j) ~= -1
                    H_r12_n504_z21(i,j) = mod(H_r12_n504_z21(i,j),LDPC.Z);
                end
                prot{i,j} =  int2str(H_r12_n504_z21(i,j));
                if strcmp(prot(i,j),'-1')
                    prot{i,j}='-';                                  
                end
                
        end
    end
  %----------
    
  LDPC.H_prot = prot;
  LDPC = genmatt(LDPC); % compute check and generator matrices
  
return
            





